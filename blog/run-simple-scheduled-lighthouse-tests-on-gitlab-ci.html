<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head=""></title><meta name="description" content="Step-by-step tutorial on setting up scheduled Lighthouse performance tests using GitLab CI to monitor and improve website performance." data-next-head=""/><meta property="og:title" content="Run simple scheduled Lighthouse tests on GitLab CI" data-next-head=""/><meta property="og:description" content="Step-by-step tutorial on setting up scheduled Lighthouse performance tests using GitLab CI to monitor and improve website performance." data-next-head=""/><meta property="og:type" content="article" data-next-head=""/><meta property="og:url" content="https://toukopeltomaa.com/blog/run-simple-scheduled-lighthouse-tests-on-gitlab-ci" data-next-head=""/><meta property="article:published_time" content="2019-02-12T00:00:00.000Z" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:title" content="Run simple scheduled Lighthouse tests on GitLab CI" data-next-head=""/><meta name="twitter:description" content="Step-by-step tutorial on setting up scheduled Lighthouse performance tests using GitLab CI to monitor and improve website performance." data-next-head=""/><link rel="icon" type="image/x-icon" href="/favicon.ico"/><link rel="preload" href="/_next/static/css/22aa91873c8d2727.css" as="style"/><link rel="stylesheet" href="/_next/static/css/22aa91873c8d2727.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-d7f578ab3069408c.js" defer=""></script><script src="/_next/static/chunks/main-9d035c440ec94d06.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2656e0d0c6f9f835.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-94c6f905ad8c8fc3.js" defer=""></script><script src="/_next/static/7VvgJLRtOdQPL3ocSe1nY/_buildManifest.js" defer=""></script><script src="/_next/static/7VvgJLRtOdQPL3ocSe1nY/_ssgManifest.js" defer=""></script></head><body class="dark min-h-screen flex flex-col bg-gradient-to-b from-gray-950 to-gray-900"><div class="border-b border-gray-900 bg-gray-950 text-gray-400 relative z-10"><div class="container mx-auto max-w-7xl p-4"><div class="flex items-center gap-4"><a class="text-white font-semibold text-xl rounded hover:bg-gray-800 transition-colors" href="/">Touko Peltomaa</a><a data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2 has-[&gt;svg]:px-3" href="/blog/page/0">Blog</a><a data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2 has-[&gt;svg]:px-3" href="/resume">Resume</a><div class="flex flex-1 justify-end gap-4"><a href="https://github.com/peltomaa" target="_blank" rel="noopener noreferrer" data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground size-9"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="https://linkedin.com/in/toukopeltomaa" target="_blank" rel="noopener noreferrer" data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground size-9"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></div></div></div></div><div class="grow container mx-auto max-w-7xl py-10 p-4"><div id="__next"><article class="max-w-none space-y-8"><div class="opacity-0 animate-[slideUp_ease-out_forwards]" style="animation-delay:100ms;animation-duration:500ms"><h1 class="text-4xl font-bold mb-4">Run simple scheduled Lighthouse tests on GitLab CI</h1></div><div class="opacity-0 animate-[slideUp_ease-out_forwards]" style="animation-delay:300ms;animation-duration:500ms"><time dateTime="2019-02-12T00:00:00.000Z" class="text-gray-500 block">2/12/2019</time></div><div class="opacity-0 animate-[slideUp_ease-out_forwards]" style="animation-delay:500ms;animation-duration:500ms"><div class="prose lg:prose-xl prose-invert"><h2>Why?</h2>
<p>It&#39;s good to monitor your site performance on regular basis. New content like images, tracking pixels and server issues can be problems that affect your site&#39;s performance. Lighthouse is a tool which can point out these issues to you.</p>
<h2>What is Lighthouse?</h2>
<p><em>Lighthouse is an open-source, automated tool for improving the quality of web pages. You can run it against any web page, public or requiring authentication. It has audits for performance, accessibility, progressive web apps, and more.</em>
–<a href="https://developers.google.com/web/tools/lighthouse/">Lighthouse Website</a></p>
<h2>Getting started</h2>
<p>In this tutorial I&#39;ll teach you how to run a simple scheduled Lighthouse performance test on your site using GitLab&#39;s free CI service.</p>
<h3>What is GitLab?</h3>
<p><em>GitLab is a single application for the entire software development lifecycle. From project planning and source code management to CI/CD, monitoring, and security.</em>
–<a href="https://about.gitlab.com/">GitLab About page</a></p>
<p>GitLab is considered alternative to GitHub.</p>
<h3>1. Set up GitLab</h3>
<p>Register <a href="https://gitlab.com/users/sign_in">here</a>.</p>
<h3>2. Create new repository</h3>
<h4>Begin by creating new project pressing the <code>New Project</code> button on your GitLab root page</h4>
<p><img src="/create-new-gitlab-project.png" alt="Create new GitLab project"></p>
<h4>Give your project a name</h4>
<p><img src="/gitlab-project-name.png" alt="GitLab project name">
For example name your project like this: <code>lighthouse-{your site}</code>.</p>
<p>Finnish creating your project by pressing the <code>Create project</code> button. Pressing the button takes you to the next step.</p>
<h3>3. Create <code>.gitlab-ci.yml</code> file</h3>
<h4>To add script where all the magic happens and click the <code>New file</code> button</h4>
<p><img src="/fresh-gitlab-project-page.png" alt="Fresh GitLab project page"></p>
<h4>The file</h4>
<p><img src="/gitlab-ci-config.png" alt="GitLab CI config"></p>
<h4>Copy the content of the file below and copy it into GitLab&#39;s file editor</h4>
<p>Remember to replace <code>{TEST Url}</code> with the URL of the page you wished to be tested.</p>
<pre><code class="language-yml"><span class="hljs-attr">image:</span> <span class="hljs-string">markhobson/node-chrome</span>

<span class="hljs-attr">run_lighthouse:</span>
  <span class="hljs-attr">variables:</span>
    <span class="hljs-attr">LIGHTHOUSE_TEST_URL:</span> { <span class="hljs-string">TEST</span> <span class="hljs-string">Url</span> }
  <span class="hljs-attr">stage:</span> <span class="hljs-string">deploy</span>
  <span class="hljs-attr">environment:</span> <span class="hljs-string">Production</span>
  <span class="hljs-attr">only:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">master</span>
  <span class="hljs-attr">before_script:</span>
    <span class="hljs-comment"># Install Lighthouse</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">npm</span> <span class="hljs-string">i</span> <span class="hljs-string">-g</span> <span class="hljs-string">lighthouse</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-comment"># Run Lighthouse test</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">lighthouse</span> <span class="hljs-string">--chrome-flags=&quot;--headless</span> <span class="hljs-string">--no-sandbox&quot;</span> <span class="hljs-string">$LIGHTHOUSE_TEST_URL</span> <span class="hljs-string">--output</span> <span class="hljs-string">html</span> <span class="hljs-string">--output-path</span> <span class="hljs-string">./report.html</span>
  <span class="hljs-attr">artifacts:</span>
    <span class="hljs-attr">paths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./report.html</span>
    <span class="hljs-attr">expire_in:</span> <span class="hljs-number">1</span> <span class="hljs-string">week</span>
</code></pre><p>Click <code>Commit changes</code> to finish creating the file.</p>
<h3>4. Test your job</h3>
<p>After committing the changes the test should start right away.</p>
<h4>Go to <code>CI / CD -&gt; Jobs</code> on the sidebar to see your test running.</h4>
<p><img src="/gitlab-ci-jobs-list.png" alt="GitLab CI jobs list"></p>
<h3>5. Schedule tests</h3>
<h4>To Schedule tests go to <code>CI / CD -&gt; Schedules</code> and press <code>Create schedule</code> button</h4>
<p><img src="/gitlab-ci-create-new-schedule.png" alt="GitLab CI create new schedule"></p>
<h4>Set up schedule</h4>
<p>Give your test a name and a schedule using Cron. More about Cron <a href="https://en.wikipedia.org/wiki/Cron">here</a>.
<img src="/gitlab-ci-schedule-a-new-pipeline.png" alt="GitLab CI schedule a new pipeline">
Press <code>Save pipeline schedule</code> to finish your schedule.</p>
<h4>Schedule is ready</h4>
<p><img src="/gitlab-ci-active-pipeline-schedule.png" alt="GitLab CI active pipeline schedule"></p>
<h3>6. Review your results</h3>
<h4>All your tests appear at <code>CI / CD -&gt; Jobs</code></h4>
<p><img src="/gitlab-ci-passed-pipeline.png" alt="GitLab CI passed pipeline">
To download and view your Lighthouse reports click the cloud icon on the right.</p>
</div></div></article></div></div><footer class="bg-gray-950 border-t border-gray-900"><div class="container mx-auto max-w-7xl px-4 py-8"><div class="flex flex-col md:flex-row justify-between items-center gap-4"><div class="flex gap-4"><a href="https://github.com/peltomaa" target="_blank" rel="noopener noreferrer" data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground size-9"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="https://linkedin.com/in/toukopeltomaa" target="_blank" rel="noopener noreferrer" data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground size-9"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></div><div class="flex flex-row gap-8"><a data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2 has-[&gt;svg]:px-3" href="/blog/page/0">Blog</a><a data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2 has-[&gt;svg]:px-3" href="/resume">Resume</a></div><p class="text-gray-400 text-sm">© <!-- -->2025<!-- --> Touko Peltomaa</p></div></div></footer><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Run simple scheduled Lighthouse tests on GitLab CI","date":"2019-02-12T00:00:00.000Z","description":"Step-by-step tutorial on setting up scheduled Lighthouse performance tests using GitLab CI to monitor and improve website performance.","slug":"run-simple-scheduled-lighthouse-tests-on-gitlab-ci","content":"\n## Why?\n\nIt's good to monitor your site performance on regular basis. New content like images, tracking pixels and server issues can be problems that affect your site's performance. Lighthouse is a tool which can point out these issues to you.\n\n## What is Lighthouse?\n\n_Lighthouse is an open-source, automated tool for improving the quality of web pages. You can run it against any web page, public or requiring authentication. It has audits for performance, accessibility, progressive web apps, and more._\n–[Lighthouse Website](https://developers.google.com/web/tools/lighthouse/)\n\n## Getting started\n\nIn this tutorial I'll teach you how to run a simple scheduled Lighthouse performance test on your site using GitLab's free CI service.\n\n### What is GitLab?\n\n_GitLab is a single application for the entire software development lifecycle. From project planning and source code management to CI/CD, monitoring, and security._\n–[GitLab About page](https://about.gitlab.com/)\n\nGitLab is considered alternative to GitHub.\n\n### 1. Set up GitLab\n\nRegister [here](https://gitlab.com/users/sign_in).\n\n### 2. Create new repository\n\n#### Begin by creating new project pressing the `New Project` button on your GitLab root page\n\n![Create new GitLab project](/create-new-gitlab-project.png)\n\n#### Give your project a name\n\n![GitLab project name](/gitlab-project-name.png)\nFor example name your project like this: `lighthouse-{your site}`.\n\nFinnish creating your project by pressing the `Create project` button. Pressing the button takes you to the next step.\n\n### 3. Create `.gitlab-ci.yml` file\n\n#### To add script where all the magic happens and click the `New file` button\n\n![Fresh GitLab project page](/fresh-gitlab-project-page.png)\n\n#### The file\n\n![GitLab CI config](/gitlab-ci-config.png)\n\n#### Copy the content of the file below and copy it into GitLab's file editor\n\nRemember to replace `{TEST Url}` with the URL of the page you wished to be tested.\n\n```yml\nimage: markhobson/node-chrome\n\nrun_lighthouse:\n  variables:\n    LIGHTHOUSE_TEST_URL: { TEST Url }\n  stage: deploy\n  environment: Production\n  only:\n    - master\n  before_script:\n    # Install Lighthouse\n    - npm i -g lighthouse\n  script:\n    # Run Lighthouse test\n    - lighthouse --chrome-flags=\"--headless --no-sandbox\" $LIGHTHOUSE_TEST_URL --output html --output-path ./report.html\n  artifacts:\n    paths:\n      - ./report.html\n    expire_in: 1 week\n```\n\nClick `Commit changes` to finish creating the file.\n\n### 4. Test your job\n\nAfter committing the changes the test should start right away.\n\n#### Go to `CI / CD -\u003e Jobs` on the sidebar to see your test running.\n\n![GitLab CI jobs list](/gitlab-ci-jobs-list.png)\n\n### 5. Schedule tests\n\n#### To Schedule tests go to `CI / CD -\u003e Schedules` and press `Create schedule` button\n\n![GitLab CI create new schedule](/gitlab-ci-create-new-schedule.png)\n\n#### Set up schedule\n\nGive your test a name and a schedule using Cron. More about Cron [here](https://en.wikipedia.org/wiki/Cron).\n![GitLab CI schedule a new pipeline](/gitlab-ci-schedule-a-new-pipeline.png)\nPress `Save pipeline schedule` to finish your schedule.\n\n#### Schedule is ready\n\n![GitLab CI active pipeline schedule](/gitlab-ci-active-pipeline-schedule.png)\n\n### 6. Review your results\n\n#### All your tests appear at `CI / CD -\u003e Jobs`\n\n![GitLab CI passed pipeline](/gitlab-ci-passed-pipeline.png)\nTo download and view your Lighthouse reports click the cloud icon on the right.\n","htmlContent":"\u003ch2\u003eWhy?\u003c/h2\u003e\n\u003cp\u003eIt\u0026#39;s good to monitor your site performance on regular basis. New content like images, tracking pixels and server issues can be problems that affect your site\u0026#39;s performance. Lighthouse is a tool which can point out these issues to you.\u003c/p\u003e\n\u003ch2\u003eWhat is Lighthouse?\u003c/h2\u003e\n\u003cp\u003e\u003cem\u003eLighthouse is an open-source, automated tool for improving the quality of web pages. You can run it against any web page, public or requiring authentication. It has audits for performance, accessibility, progressive web apps, and more.\u003c/em\u003e\n–\u003ca href=\"https://developers.google.com/web/tools/lighthouse/\"\u003eLighthouse Website\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eGetting started\u003c/h2\u003e\n\u003cp\u003eIn this tutorial I\u0026#39;ll teach you how to run a simple scheduled Lighthouse performance test on your site using GitLab\u0026#39;s free CI service.\u003c/p\u003e\n\u003ch3\u003eWhat is GitLab?\u003c/h3\u003e\n\u003cp\u003e\u003cem\u003eGitLab is a single application for the entire software development lifecycle. From project planning and source code management to CI/CD, monitoring, and security.\u003c/em\u003e\n–\u003ca href=\"https://about.gitlab.com/\"\u003eGitLab About page\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eGitLab is considered alternative to GitHub.\u003c/p\u003e\n\u003ch3\u003e1. Set up GitLab\u003c/h3\u003e\n\u003cp\u003eRegister \u003ca href=\"https://gitlab.com/users/sign_in\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003ch3\u003e2. Create new repository\u003c/h3\u003e\n\u003ch4\u003eBegin by creating new project pressing the \u003ccode\u003eNew Project\u003c/code\u003e button on your GitLab root page\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"/create-new-gitlab-project.png\" alt=\"Create new GitLab project\"\u003e\u003c/p\u003e\n\u003ch4\u003eGive your project a name\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"/gitlab-project-name.png\" alt=\"GitLab project name\"\u003e\nFor example name your project like this: \u003ccode\u003elighthouse-{your site}\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eFinnish creating your project by pressing the \u003ccode\u003eCreate project\u003c/code\u003e button. Pressing the button takes you to the next step.\u003c/p\u003e\n\u003ch3\u003e3. Create \u003ccode\u003e.gitlab-ci.yml\u003c/code\u003e file\u003c/h3\u003e\n\u003ch4\u003eTo add script where all the magic happens and click the \u003ccode\u003eNew file\u003c/code\u003e button\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"/fresh-gitlab-project-page.png\" alt=\"Fresh GitLab project page\"\u003e\u003c/p\u003e\n\u003ch4\u003eThe file\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"/gitlab-ci-config.png\" alt=\"GitLab CI config\"\u003e\u003c/p\u003e\n\u003ch4\u003eCopy the content of the file below and copy it into GitLab\u0026#39;s file editor\u003c/h4\u003e\n\u003cp\u003eRemember to replace \u003ccode\u003e{TEST Url}\u003c/code\u003e with the URL of the page you wished to be tested.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-yml\"\u003e\u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emarkhobson/node-chrome\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003erun_lighthouse:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003evariables:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eLIGHTHOUSE_TEST_URL:\u003c/span\u003e { \u003cspan class=\"hljs-string\"\u003eTEST\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eUrl\u003c/span\u003e }\n  \u003cspan class=\"hljs-attr\"\u003estage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edeploy\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eProduction\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eonly:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emaster\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ebefore_script:\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e# Install Lighthouse\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enpm\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ei\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e-g\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003elighthouse\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003escript:\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e# Run Lighthouse test\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003elighthouse\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--chrome-flags=\u0026quot;--headless\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--no-sandbox\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e$LIGHTHOUSE_TEST_URL\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--output\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehtml\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--output-path\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./report.html\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eartifacts:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003epaths:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./report.html\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eexpire_in:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eweek\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eClick \u003ccode\u003eCommit changes\u003c/code\u003e to finish creating the file.\u003c/p\u003e\n\u003ch3\u003e4. Test your job\u003c/h3\u003e\n\u003cp\u003eAfter committing the changes the test should start right away.\u003c/p\u003e\n\u003ch4\u003eGo to \u003ccode\u003eCI / CD -\u0026gt; Jobs\u003c/code\u003e on the sidebar to see your test running.\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"/gitlab-ci-jobs-list.png\" alt=\"GitLab CI jobs list\"\u003e\u003c/p\u003e\n\u003ch3\u003e5. Schedule tests\u003c/h3\u003e\n\u003ch4\u003eTo Schedule tests go to \u003ccode\u003eCI / CD -\u0026gt; Schedules\u003c/code\u003e and press \u003ccode\u003eCreate schedule\u003c/code\u003e button\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"/gitlab-ci-create-new-schedule.png\" alt=\"GitLab CI create new schedule\"\u003e\u003c/p\u003e\n\u003ch4\u003eSet up schedule\u003c/h4\u003e\n\u003cp\u003eGive your test a name and a schedule using Cron. More about Cron \u003ca href=\"https://en.wikipedia.org/wiki/Cron\"\u003ehere\u003c/a\u003e.\n\u003cimg src=\"/gitlab-ci-schedule-a-new-pipeline.png\" alt=\"GitLab CI schedule a new pipeline\"\u003e\nPress \u003ccode\u003eSave pipeline schedule\u003c/code\u003e to finish your schedule.\u003c/p\u003e\n\u003ch4\u003eSchedule is ready\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"/gitlab-ci-active-pipeline-schedule.png\" alt=\"GitLab CI active pipeline schedule\"\u003e\u003c/p\u003e\n\u003ch3\u003e6. Review your results\u003c/h3\u003e\n\u003ch4\u003eAll your tests appear at \u003ccode\u003eCI / CD -\u0026gt; Jobs\u003c/code\u003e\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"/gitlab-ci-passed-pipeline.png\" alt=\"GitLab CI passed pipeline\"\u003e\nTo download and view your Lighthouse reports click the cloud icon on the right.\u003c/p\u003e\n"},"canonicalUrl":"https://toukopeltomaa.com/blog/run-simple-scheduled-lighthouse-tests-on-gitlab-ci"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"run-simple-scheduled-lighthouse-tests-on-gitlab-ci"},"buildId":"7VvgJLRtOdQPL3ocSe1nY","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>